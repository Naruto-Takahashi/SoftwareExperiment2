/* ===================================================================
 * equdefs.inc
 * 定数・アドレス定義インクルードファイル
 * =================================================================== */

/* -------------------------------------------------------------------
 * メモリマップ・ベースアドレス
 * (MC68VZ328 仕様に基づく)
 * ------------------------------------------------------------------- */
.equ REGBASE, 0xFFF000      | 内部レジスタのベースアドレス (DMAP)
.equ IOBASE,  0x00d00000    | I/Oポートのベースアドレス

/* -------------------------------------------------------------------
 * 割り込みコントローラ関連 (Text 1 付録 B.3.1)
 * ------------------------------------------------------------------- */
.equ IVR, REGBASE+0x300     | 割り込みベクタレジスタ
.equ IMR, REGBASE+0x304     | 割り込みマスクレジスタ
.equ ISR, REGBASE+0x30c     | 割り込みステータスレジスタ
.equ IPR, REGBASE+0x310     | 割り込みペンディングレジスタ

/* -------------------------------------------------------------------
 * タイマ1関連 (Text 1 付録 B.3.2)
 * ------------------------------------------------------------------- */
.equ TCTL1,  REGBASE+0x600  | コントロールレジスタ
.equ TPRER1, REGBASE+0x602  | プリスケーラレジスタ
.equ TCMP1,  REGBASE+0x604  | コンペアレジスタ
.equ TCN1,   REGBASE+0x608  | カウンタレジスタ
.equ TSTAT1, REGBASE+0x60a  | ステータスレジスタ

/* -------------------------------------------------------------------
 * UART1 (シリアルポート0) 関連 (Text 1 付録 B.3.3)
 * ------------------------------------------------------------------- */
.equ USTCNT1, REGBASE+0x900 | ステータス/コントロールレジスタ
.equ UBAUD1,  REGBASE+0x902 | ボーレートコントロールレジスタ
.equ URX1,    REGBASE+0x904 | 受信レジスタ (FIFO)
.equ UTX1,    REGBASE+0x906 | 送信レジスタ (FIFO)

/* -------------------------------------------------------------------
 * LED制御 (Text 1 付録 A.4.3.1)
 * ------------------------------------------------------------------- */
.equ LED7, IOBASE+0x000002f | Bit 7
.equ LED6, IOBASE+0x000002d | Bit 6
.equ LED5, IOBASE+0x000002b | Bit 5
.equ LED4, IOBASE+0x0000029 | Bit 4
.equ LED3, IOBASE+0x000003f | Bit 3
.equ LED2, IOBASE+0x000003d | Bit 2
.equ LED1, IOBASE+0x000003b | Bit 1
.equ LED0, IOBASE+0x0000039 | Bit 0

/* -------------------------------------------------------------------
 * モニタ用システムコール番号定義 (TRAP #0)
 * (Text 1 3.12節 および Text 2 1.4.5節)
 * ------------------------------------------------------------------- */
.equ SYSCALL_NUM_GETSTRING,    1
.equ SYSCALL_NUM_PUTSTRING,    2
.equ SYSCALL_NUM_RESET_TIMER,  3
.equ SYSCALL_NUM_SET_TIMER,    4
.equ SYSCALL_NUM_SET_SKIPMT,   5  | 拡張: skipmt()用

/* -------------------------------------------------------------------
 * キュー構造体オフセット定義 (モニタ内部変数用)
 * ※ モニタを自作/修正する場合に使用
 * ------------------------------------------------------------------- */
.equ top,    0
.equ bottom, 255
.equ in,     256
.equ out,    260
.equ s,      264
.equ Q_SIZE, 266

.equ Q0_START, 0x5000       | キュー#0の先頭アドレス
.equ Q_BASE,   Q0_START     | キュー領域のベース